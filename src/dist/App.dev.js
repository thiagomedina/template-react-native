"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=App;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _api=_interopRequireDefault(require("./services/api"));var _reactNative=require("react-native");var _jsxFileName="/home/dev/Documentos/template-react-native/src/App.js";function App(){var _this=this;var _useState=(0,_react.useState)([]),_useState2=(0,_slicedToArray2["default"])(_useState,2),repositories=_useState2[0],setRepositories=_useState2[1];(0,_react.useEffect)(function(){_api["default"].get('repositories').then(function(response){setRepositories(response.data);});},[]);function handleLikeRepository(id){var response,likedRepository,repositoriesUpdated;return _regenerator["default"].async(function handleLikeRepository$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator["default"].awrap(_api["default"].post("repositories/".concat(id,"/like")));case 2:response=_context.sent;likedRepository=response.data;repositoriesUpdated=repositories.map(function(repository){if(repository.id===id){return likedRepository;}else{return repository;}});setRepositories(repositoriesUpdated);case 6:case"end":return _context.stop();}}});}return _react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_reactNative.StatusBar,{barStyle:"light-content",backgroundColor:"#7159c1",__self:this,__source:{fileName:_jsxFileName,lineNumber:47,columnNumber:7}}),_react["default"].createElement(_reactNative.SafeAreaView,{style:styles.container,__self:this,__source:{fileName:_jsxFileName,lineNumber:48,columnNumber:7}},_react["default"].createElement(_reactNative.FlatList,{data:repositories,keyExtractor:function keyExtractor(repository){return repository.id;},renderItem:function renderItem(_ref){var repository=_ref.item;return _react["default"].createElement(_reactNative.View,{style:styles.repositoryContainer,__self:_this,__source:{fileName:_jsxFileName,lineNumber:53,columnNumber:13}},_react["default"].createElement(_reactNative.Text,{style:styles.repository,__self:_this,__source:{fileName:_jsxFileName,lineNumber:54,columnNumber:15}},repository.title),_react["default"].createElement(_reactNative.View,{style:styles.techsContainer,__self:_this,__source:{fileName:_jsxFileName,lineNumber:56,columnNumber:15}},repository.techs.map(function(tech){return _react["default"].createElement(_reactNative.Text,{key:tech,style:styles.tech,__self:_this,__source:{fileName:_jsxFileName,lineNumber:58,columnNumber:19}},tech);})),_react["default"].createElement(_reactNative.View,{style:styles.likesContainer,__self:_this,__source:{fileName:_jsxFileName,lineNumber:64,columnNumber:15}},_react["default"].createElement(_reactNative.Text,{style:styles.likeText,testID:"repository-likes-".concat(repository.id),__self:_this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:17}},repository.likes," curtida",repository.likes>1?'s':'')),_react["default"].createElement(_reactNative.TouchableOpacity,{style:styles.button,onPress:function onPress(){return handleLikeRepository(repository.id);},testID:"like-button-".concat(repository.id),__self:_this,__source:{fileName:_jsxFileName,lineNumber:73,columnNumber:15}},_react["default"].createElement(_reactNative.Text,{style:styles.buttonText,__self:_this,__source:{fileName:_jsxFileName,lineNumber:78,columnNumber:17}},"Curtir")));},__self:this,__source:{fileName:_jsxFileName,lineNumber:49,columnNumber:9}})));}var styles=_reactNative.StyleSheet.create({container:{flex:1,backgroundColor:"#7159c1"},repositoryContainer:{marginBottom:15,marginHorizontal:15,backgroundColor:"#fff",padding:20},repository:{fontSize:32,fontWeight:"bold"},techsContainer:{flexDirection:"row",marginTop:10},tech:{fontSize:12,fontWeight:"bold",marginRight:10,backgroundColor:"#04d361",paddingHorizontal:10,paddingVertical:5,color:"#fff"},likesContainer:{marginTop:15,flexDirection:"row",justifyContent:"space-between"},likeText:{fontSize:14,fontWeight:"bold",marginRight:10},button:{marginTop:10},buttonText:{fontSize:14,fontWeight:"bold",marginRight:10,color:"#fff",backgroundColor:"#7159c1",padding:15}});